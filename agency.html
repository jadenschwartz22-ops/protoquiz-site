<!doctype html>
<!-- build: v6 -->
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EMS ProtoQuiz for Agencies</title>
  <meta name="description" content="Region-accurate, page-cited EMS quizzes and scenarios for departments and training officers." />

  <!-- SEO -->
  <link rel="canonical" href="https://protoquiz.com/agency.html">
  <meta name="robots" content="index,follow" />

  <!-- Social -->
  <meta property="og:title" content="EMS ProtoQuiz — For Agencies" />
  <meta property="og:image" content="logo2.png" />
  <meta name="theme-color" content="#05080c" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="apple-touch-icon" href="favicon.png" />

  <!-- Google tag (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-LNSS9BMEP8"></script>
  <script>
    // GA4 setup
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-LNSS9BMEP8');

    // Unified tracker -> GA4 custom events
    function track(name, props){
      try { gtag('event', name, props || {}); } catch(e){}
    }

    // Identify page for event context
    const PAGE = 'agency';
  </script>

  <style>
    :root{
      --bg:#05080c; --panel:#0a0f15; --ink:#e6edf7; --muted:#9aa4b2; --line:#16202b;
      --cyan:#22d3ee; --violet:#a855f7; --radius:18px; --max:980px;
    }
    *{box-sizing:border-box}
    body{margin:0; color:var(--ink); font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      background:
        radial-gradient(1000px 480px at 85% -10%, rgba(168,85,247,.18), transparent 60%),
        radial-gradient(780px 360px at -10% 0%, rgba(34,211,238,.15), transparent 55%),
        var(--bg);}
    a{color:inherit; text-decoration:none}
    :focus-visible{outline:2px solid var(--cyan); outline-offset:2px; border-radius:10px}
    .wrap{max-width:var(--max); margin:0 auto; padding:28px 20px}
    header{border-bottom:1px solid var(--line); background:linear-gradient(180deg, rgba(255,255,255,.03), transparent)}
    .nav{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:16px 20px}
    .brand-link{display:flex; align-items:center; gap:12px}
    .brand-link img{width:64px; height:64px; border-radius:12px}
    .brand-name{font-weight:800}
    .chip{font-size:13px; padding:6px 10px; border-radius:999px; border:1px solid #243246; color:#cfd8e3; opacity:.9; background:rgba(255,255,255,.02)}
    h1{margin:18px 0 6px; font-size:clamp(30px,6.2vw,48px); letter-spacing:-.01em}
    .lead{color:var(--muted); max-width:760px}
    .grid{display:grid; gap:14px; margin-top:18px}
    @media (min-width:840px){ .grid{grid-template-columns:repeat(3,1fr)} }
    .card{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015)); border:1px solid var(--line); border-radius:var(--radius); padding:18px}
    .card h3{margin:0 0 6px; font-size:17px}
    .cta{display:flex; gap:12px; flex-wrap:wrap; margin:18px 0}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:11px 16px; border-radius:12px; background:linear-gradient(90deg, var(--cyan), var(--violet)); color:#061018; font-weight:800}
    footer{margin-top:36px; padding:36px 20px 60px; color:var(--muted); border-top:1px solid var(--line)}
    /* Dialog */
    dialog{width:min(640px, 96vw); border:1px solid #223041; border-radius:16px; padding:0; background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015)); color:var(--ink)}
    /* Darker, blurrier backdrop */
    dialog::backdrop{
      background: rgba(5, 8, 12, 0.72);
      backdrop-filter: blur(6px) saturate(110%);
    }
    .dlg-head{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--line)}
    .dlg-body{padding:16px}
    .field{display:grid; gap:6px; margin:10px 0}
    input, textarea, select{width:100%; background:#0c1219; color:#e6edf7; border:1px solid #223041; border-radius:12px; padding:10px 12px; font:inherit}
    textarea{min-height:120px; resize:vertical}
    .row{display:flex; gap:10px; flex-wrap:wrap}

    /* Dim/blur page when dialog is open */
    body.dim header,
    body.dim main,
    body.dim footer {
      filter: blur(2px) brightness(0.9);
      transition: filter .15s ease;
    }
    /* No .fx here, so no extra rule needed */
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <a class="brand-link" href="index.html#top" aria-label="EMS ProtoQuiz — Home">
        <img src="logo2.png" alt="EMS ProtoQuiz logo" width="64" height="64" decoding="async" />
        <span class="brand-name">EMS ProtoQuiz</span>
      </a>
      <nav>
        <a class="chip" href="index.html" data-track="BackToMain">Back to main</a>
        <button class="chip" id="openContact" data-track="AgencyContactOpen">Contact</button>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <h1>Bring ProtoQuiz to your agency</h1>
    <p class="lead">Fast, page-cited training built from your protocol PDF. Standardize judgment across crews without adding work to your TOs.</p>

    <div class="grid">
      <article class="card"><h3>Local-accurate</h3><p>Quizzes and scenarios are generated from your document. Adult/peds splits, routes, repeats, and base-contact are enforced.</p></article>
      <article class="card"><h3>Traceable</h3><p>Every item links to the exact page. Zero dose errors and clear auditability for QA.</p></article>
      <article class="card"><h3>Low lift</h3><p>Upload a PDF and go. Pilot quickly; add seats only if it works for your crews.</p></article>
      <article class="card"><h3>Onboarding & refreshers</h3><p>Give new hires and seasoned medics short daily reps that match your region.</p></article>
      <article class="card"><h3>Analytics </h3><p>See coverage and weak areas by topic. Compare protocol versions when you update.</p></article>
      <article class="card"><h3>Budget-friendly</h3><p>Start small. Scale if outcomes improve.</p></article>
    </div>

    <div class="cta">
      <button class="btn" id="openContact2" data-track="AgencyContactOpen">Request a pilot</button>
      <!-- Email us now opens the dialog instead of mailto -->
      <button class="chip" id="openContact3" data-track="AgencyContactOpen">Email us</button>
    </div>
  </main>

  <footer class="wrap">© 2025 <a href="https://teachmetolive.com" id="tmtlLink" target="_blank" rel="noopener" data-track="TMTLLink">Teach Me to Live LLC</a></footer>

  <!-- Contact dialog (default reason = Agency pilot) -->
  <dialog id="contactDialog" aria-labelledby="dlgTitle">
    <div class="dlg-head">
      <strong id="dlgTitle">Contact</strong>
      <form method="dialog"><button class="chip" value="close">Close</button></form>
    </div>
    <div class="dlg-body">
      <form id="contactForm" action="https://formspree.io/f/xwprwdpg" method="POST">
        <!-- Honeypot (spam trap) -->
        <input type="text" name="phone" tabindex="-1" autocomplete="off" style="position:absolute;left:-10000px" aria-hidden="true">
        <div class="row">
          <div class="field" style="flex:1 1 220px">
            <label for="name">Name</label>
            <input id="name" name="name" autocomplete="name" />
          </div>
          <div class="field" style="flex:1 1 220px">
            <label for="email">Email</label>
            <input id="email" name="email" type="email" autocomplete="email" required />
          </div>
        </div>
        <div class="field">
          <label for="type">Reason</label>
          <select id="type" name="type">
            <option>Agency pilot</option>
            <option>Question</option>
            <option>Feedback</option>
            <option>Press/Other</option>
          </select>
        </div>
        <div class="field">
          <label for="msg">Message</label>
          <textarea id="msg" name="message" placeholder="Tell us about your department and goals…"></textarea>
        </div>
        <div class="row" style="justify-content:space-between; align-items:center">
          <button class="btn" type="submit" data-track="AgencyContactSubmitClick">Send</button>
          <a class="chip" href="index.html#top" data-track="BackToMain">Back to main</a>
        </div>
      </form>
      <p class="lead" style="font-size:14px; color:#8fa3ba; margin-top:10px">Your message is sent securely via Formspree.</p>
    </div>
  </dialog>

  <script>
    const dlg = document.getElementById("contactDialog");
    const openers = [
      document.getElementById("openContact"),
      document.getElementById("openContact2"),
      document.getElementById("openContact3")
    ].filter(Boolean);
    let lastOpener = null;
    openers.forEach(btn=>{
      btn.addEventListener("click", ()=>{
        lastOpener = btn;
        document.body.classList.add("dim"); // dim page
        dlg.showModal(); /* click tracked via data-track */
      });
    });
    dlg.addEventListener("close", ()=>{
      document.body.classList.remove("dim"); // restore page
      if(lastOpener) lastOpener.focus();
    });

    // Submit -> Formspree POST + track + inline feedback
    document.getElementById("contactForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      const form = e.target;
      const data = new FormData(form);
      const type = data.get("type") || "Agency pilot";

      track("AgencyContactSubmit", { page: PAGE, type });

      try {
        const res = await fetch(form.action, {
          method: "POST",
          headers: { "Accept": "application/json" },
          body: data
        });

        if (res.ok) {
          form.reset();
          form.outerHTML = `<p class="lead" style="font-size:14px; color:#a7f3d0; margin-top:10px">
            ✅ Thanks—your message was sent. We’ll be in touch about a pilot.
          </p>`;
        } else {
          throw new Error("Formspree error");
        }
      } catch (err) {
        const errBox = document.createElement("p");
        errBox.className = "lead";
        errBox.style.fontSize = "14px";
        errBox.style.color = "#fda4af";
        errBox.style.marginTop = "10px";
        errBox.textContent = "Sorry, something went wrong sending your message. Please try again.";
        form.appendChild(errBox);
      }
    });

    // Generic click tracker for any element with [data-track]
    document.addEventListener('click', (e)=>{
      const el = e.target.closest('[data-track]');
      if (!el) return;
      const name = el.dataset.track;
      const label = el.getAttribute('data-label') || el.id || el.getAttribute('aria-label') || el.textContent.trim().slice(0,80) || 'click';
      track(name, { page: PAGE, label });
    });

    // (Optional) If you add <details> later
    document.querySelectorAll('details').forEach(d=>{
      d.addEventListener('toggle', ()=>{
        if (d.open) {
          const label = d.querySelector('summary')?.textContent.trim().slice(0,80) || 'details';
          track('DropdownOpen', { page: PAGE, label });
        }
      });
    });
  </script>
</body>
</html>
